"0","#| label: dispersion-check"
"0","#| message: false"
"0","#| warning: false"
"0",""
"0","# Calculate dispersion parameter"
"0","dispersion <- sum(residuals(model_poisson, type = ""pearson"")^2) / "
"0","              model_poisson$df.residual"
"0",""
"0","# Build message lines"
"0","disp_lines <- c("
"0","  paste0(""Dispersion parameter: "", round(dispersion, 2)),"
"0","  ""Rule of thumb: >1.5 suggests overdispersion"","
"0","  if (dispersion > 1.5) {"
"0","    ""⚠ Overdispersion detected! Consider Negative Binomial model."""
"0","  } else {"
"0","    ""✓ Dispersion looks okay for Poisson model."""
"0","  }"
"0",")"
"0",""
"0","# Print as a single block"
"0","cat(paste(disp_lines, collapse = ""\n""))"
"1","Dispersion parameter: 2.8
Rule of thumb: >1.5 suggests overdispersion
⚠ Overdispersion detected! Consider Negative Binomial model."
